# ［C++］WG21月次提案文書を眺める（2020年9月）

文書の一覧
[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/#mailing2020-08:embed:cite]

提案文書で採択されたものはありません。全部で32本あります。

[:contents]

### [P0288R7 : any_invocable](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p0288r7.html)

ムーブのみが可能で、関数呼び出しの`const`性や`noexcept`性を指定可能な`std::function`である`std::any_invocable`の提案。

先月の記事を参照

[https://onihusube.hatenablog.com/entry/2020/09/18/222444#P0288R6--any_invocable:embed:cite]

前回からの変更は、規格書に追加するための文言を調整しただけの様です。

- [P0288 進行状況](https://github.com/cplusplus/papers/issues/400)

### [P0443R14 : A Unified Executors Proposal for C++](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p0443r14.html)

処理をいつどこで実行するかを制御するための汎用的な基盤となる*Executor*ライブラリの提案。

以前の記事を参照。

[https://onihusube.hatenablog.com/entry/2020/05/24/205222:embed:cite]

R13からの変更は、いくつか*Editorial*なバグを修正した事です。

- [P0288 進行状況](https://github.com/cplusplus/papers/issues/102)

### [P0881R7 : A Proposal to add stacktrace library](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p0881r7.html)

スタックトレースを取得するためのライブラリを追加する提案。

先月の記事を参照。

[https://onihusube.hatenablog.com/entry/2020/09/18/222444#P0881R6--A-Proposal-to-add-stacktrace-library:embed:cite]

LWGでのレビューが終了し、この提案は本会議での投票に向かうようです。このリビジョンはLWGでのレビューを受けて最終的な文言調整を反映したものです。多分C++23入り確定でしょう。

- [P0881 進行状況](https://github.com/cplusplus/papers/issues/119)

### [P0958R2 : Networking TS changes to support proposed Executors TS](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p0958r2.html)

Networking TSの*Executor*の依存部分をP0443の*Executor*提案の内容で置き換える提案。

現在のNetworking TSは以前のBoost.asioをベースにしており、asioの持つ*Executor*はP0443のものとは異なっているので、Networking TSの*Executor*部分もまたP0443のものとは異なった設計となっています。

Networking TSは*Executor*に強く依存しており、C++23に導入される予定の*Executor*はP0443のものがほぼ内定しているので、Networking TSもそれに依存するように変更するものです。

Boost.asioライブラリは既にP0443ベースの*Executor*周りを実装し終えて移行しており、その実装をベースとする形で書き換えています。その経験によれば、一部のものを除いて殆どのアプリケーションでは追加の変更を必要としなかったとのことです。

- [P0958 進行状況](https://github.com/cplusplus/papers/issues/339)

### [P1322R2 : Networking TS enhancement to enable custom I/O executors](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p1322r2.html)

Networking TSのI/Oオブジェクトを`io_context`だけではなく、任意の*Executor*によって構築できるようにする提案。

Networking TSの`io_context`はBoost.asioでは`io_service`と呼ばれていたもので、P0443の*Executor*にいくつかの機能が合わさったものです。

`io_context`は実行コンテキストを抽象化し表現するという役割がありますが、実行コンテキストを変更する事は単体ではできません。P0443では`executor`コンセプトによってそれら*Executor*と実行コンテキストを表現します。

Networking TSのI/Oオブジェクト（`socket, acceptor, resolver, timer`）は`io_context`を構築時に受け取り、それを利用して実行します。そこに任意の*Executor*を渡せるようにすることでユーザーが用意したものやプラットフォームネイティブの実行コンテキストでそれらの処理を実行できるようにしようとする提案です。

また、各I/Oオブジェクトのクラスのテンプレートパラメータに*Executor*を指定できるようにし、それらの動作をカスタマイズ可能としています。

この提案はおそらくNetworking TS仕様の*Executor*をベースとしており、P0443ベースで書かれていないようです。

- [Boost.Asioまとめ(1)::io_service - yutopp's blog](https://yutopp.hateblo.jp/entry/2011/12/15/001518)
- [`io_service` の使い方 - あめだまふぁくとりー](https://amedama1x1.hatenablog.com/entry/2015/12/14/000000_1)
- [P1322 進行状況](https://github.com/cplusplus/papers/issues/361)

### [P1371R3 : Pattern Matching](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p1371r3.pdf)
### [P1701R1 : Inline Namespaces: Fragility Bites](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p1701r1.pdf)
### [P1885R3 : Naming Text Encodings to Demystify Them](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p1885r3.pdf)
### [P1949R6 : C++ Identifier Syntax using Unicode Standard Annex 31](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p1949r6.html)
### [P2013R3 : Freestanding Language: Optional ::operator new](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2013r3.html)
### [P2029R3 : Proposed resolution for core issues 411, 1656, and 2333; escapes in character and string literals](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2029r3.html)
### [P2066R3 : Suggested draft TS for C++ Extensions for Transaction Memory Light](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2066r3.html)
### [P2077R1 : Heterogeneous erasure overloads for associative containers](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2077r1.html)
### [P2138R3 : Rules of Design <=> Specification engagement](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2138r3.html)
### [P2145R1 : Evolving C++ Remotely](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2145r1.html)
### [P2164R2 : views::enumerate](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2164r2.pdf)
### [P2166R1 : A Proposal to Prohibit std::basic_string and std::basic_string_view construction from nullptr](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2166r1.html)
### [P2169R2 : A Nice Placeholder With No Name](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2169r2.pdf)
### [P2192R2 : std::valstat -Transparent Returns Handling](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2192r2.pdf)
### [P2194R0 : The character set of the internal representation should be Unicode](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2194r0.pdf)
### [P2195R0 : Electronic Straw Polls](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2195r0.html)
### [P2206R0 : Executors Thread Pool review report](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2206r0.html)
### [P2212R1 : Relax Requirements for time_point::clock](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2212r1.html)
### [P2215R1 : "Undefined behavior" and the concurrency memory model](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2215r1.pdf)
### [P2216R0 : std::format improvements](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2216r0.html)
### [P2217R0 : SG16: Unicode meeting summaries 2020-06-10 through 2020-08-26](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2217r0.html)
### [P2218R0 : More flexible optional::value_or()](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2218r0.pdf)
### [P2219R0 : P0443 Executors Issues Needing Resolution](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2219r0.pdf)
### [P2220R0 : redefine properties in P0443](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2220r0.pdf)
### [P2221R0 : define P0443 cpos with tag_invoke](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2221r0.pdf)
### [P2223R0 : Trimming whitespaces before line splicing](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2223r0.pdf)
### [P2224R0 : A Better bulk_schedule](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2020/p2224r0.pdf)
